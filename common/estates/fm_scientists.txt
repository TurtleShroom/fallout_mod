estate_scientists =
{
	icon = 5
	
	color = { 220 165 100 }
	
	# Is estate kept in control of province on conquest?
	keep_on_conquest = no
	
	# They want to control at least this % of the country's non-overseas development, if # of home provinecs is above set amount
	min_territory = 0
	min_provinces_to_want_territory = 5
    
	# If true, country will get estate
	trigger = {	
		NOT = {
            OR = {
                technology_group = tech_tribal
                technology_group = tech_raider
                technology_group = tech_super_mutant
                technology_group = tech_great_khan
                technology_group = tech_swampfolk
                technology_group = tech_rodent
                technology_group = tech_children
                technology_group = tech_triggermen
                technology_group = tech_the_kings
            }
        }
	}
    
	# If true, province can be granted to estate
	province_trigger = {
		always = yes
	}	
	
	# Min autonomy in estate provinces
	min_autonomy = 25
	
	# Estate cancels out the following multiplicative local autonomy effects:
	autonomy_does_not_affect = local_production_efficiency

	country_modifier_happy = {
		production_efficiency = 0.2 
		idea_cost = -0.1
	}
	country_modifier_neutral = {
		production_efficiency = 0.1
        caravan_power = 0.1
	}	
	country_modifier_angry = {
		production_efficiency = -0.2 
		idea_cost = 0.1
	}
	
	# These do not scale, but only applied in provinces owned by the estate
	province_modifier_happy = {
		local_production_efficiency = 0.5
	}
	province_modifier_neutral = {
		local_production_efficiency = 0.25
	}	
	province_modifier_angry = {
		local_unrest = 5
	}		
	
	# Influence modifiers
	base_influence = 20
	influence_modifier = {
		desc = EST_VAL_COMMONWEALTH_INFLUENCE
		trigger = {
            tag = INS
		}	
		influence = 20
	}	
    
	influence_modifier = {
		desc = EST_VAL_OTHER_ESTATE_IN_POWER
		trigger = {
			OR = {
				has_disaster = estate_caravanners_disaster
				has_disaster = estate_settlers_disaster
                has_disaster = estate_officers_disaster
                has_disaster = estate_bureaucrats_disaster
                has_disaster = estate_faith_disaster
			}
		}	
		influence = -40
	}
	
	
	# Loyalty modifiers
	loyalty_modifier = {
		desc = EST_VAL_OTHER_ESTATE_IN_POWER_LOY
		trigger = {
			OR = {
				has_disaster = estate_caravanners_disaster
				has_disaster = estate_settlers_disaster
                has_disaster = estate_officers_disaster
                has_disaster = estate_bureaucrats_disaster
                has_disaster = estate_faith_disaster
			}
		}
		loyalty = -20
	}

	loyalty_modifier = {
		desc = EST_VAL_PLACES_OF_KNOWLEDGE
		trigger = {
            calc_true_if = {
                any_owned_province = {
                    OR = {
                        is_institution_origin = bottlecaps
                        is_institution_origin = robco
                        is_institution_origin = repconn
                        is_institution_origin = fev
                        is_institution_origin = power_armor
                        is_institution_origin = vault_tec
                        is_institution_origin = geck
                    }
                }
                amount = 1
            }
		}
		loyalty = 10
	}
	loyalty_modifier = {
		desc = EST_VAL_LACK_OF_PLACES_OF_KNOWLEDGE
        trigger = {
            NOT = {
                calc_true_if = {
                    any_owned_province = {
                        OR = {
                            is_institution_origin = bottlecaps
                            is_institution_origin = robco
                            is_institution_origin = repconn
                            is_institution_origin = fev
                            is_institution_origin = power_armor
                            is_institution_origin = vault_tec
                            is_institution_origin = geck
                        }
                    }
                    amount = 1
                }
            }
		}
		loyalty = -5
	}

    # Custom names
    custom_name = {
		desc = estate_quaesitores
		trigger = {
			tag = CAE
		}
	}

	# For province assignment
	ai_grant_province = {
		factor = 1	
		modifier = {
			factor = 0.5
			development = 20
		}
		modifier = {
			factor = 2
			NOT = { development = 10 }
		}				
		modifier = {
			factor = 0.75
			has_owner_culture = yes
		}
		modifier = {
			factor = 0.75
			province_trade_power = 5
		}			
		modifier = {
			factor = 0.75
			province_trade_power = 10
		}			
	}	
	
    # Demand Assistance
    # years: 20
    # trigger:
    #   loyalty: 30
    #   influence: 25
    # effect: 
    #   add_adm_power (more with higher influence)
    interaction = {
		name = "DEMAND_ASSISTANCE"
		icon = 2
		
		years_between_use = 20
		
		trigger = {
			estate_loyalty = {
				estate = estate_scientists
				loyalty = 30
			}	
			estate_influence = {
				estate = estate_scientists
				influence = 25
			}
		}
		
		effect = {
            if = { limit = { has_global_flag = enable_common_logging } log = "[Root.GetName] used DEMAND_ASSISTANCE scientists estate action" }
			if = {
                limit = {
                    NOT = {
                        estate_influence = {
                            estate = estate_scientists
                            influence = 25
                        }
                    }
                    estate_influence = {
                        estate = estate_scientists
                        influence = 0
                    }
                }
                
                add_adm_power = 50
            }
            if = {
                limit = {
                    NOT = {
                        estate_influence = {
                            estate = estate_scientists
                            influence = 40
                        }
                    }
                    estate_influence = {
                        estate = estate_scientists
                        influence = 25
                    }
                }
                
                add_adm_power = 100
            }
            if = {
                limit = {
                    NOT = {
                        estate_influence = {
                            estate = estate_scientists
                            influence = 60
                        }
                    }
                    estate_influence = {
                        estate = estate_scientists
                        influence = 40
                    }
                }
                
                add_adm_power = 150
            }
            if = {
                limit = {
                    estate_influence = {
                        estate = estate_scientists
                        influence = 60
                    }
                }
                
                add_adm_power = 200
            }
            add_estate_loyalty = {
				estate = estate_scientists
				loyalty = -20
			}
		}
		
		ai_will_do = {
			factor = 1
            
			modifier = {
				factor = 0
				NOT = {
                    estate_loyalty = {
                        estate = estate_scientists
                        loyalty = 60
                    }			
                }
			}			
		}
	}
    
    # Make Investment
    # years: 10
    # trigger:
    #   always
    # effect:
    #   lose years of income -0.1
    #   add 15 loyalty
    interaction = {
		name = "MAKE_INVESTMENT"
		icon = 6
		
		years_between_use = 10
		
		potential = {
			NOT = { has_disaster = estate_scientists_disaster }
		}
		
		trigger = {
			always = yes
		}
		
		effect = {
            if = { limit = { has_global_flag = enable_common_logging } log = "[Root.GetName] used MAKE_INVESTMENT scientists estate action" }
			add_years_of_income = -0.25
			add_estate_loyalty = {
				estate = estate_scientists
				loyalty = 15
			}
		}
		
		ai_will_do = {
			factor = 1
			modifier = {
				factor = 0
				NOT = { years_of_income = 0.5 }				
			}
			modifier = {
				factor = 0
				estate_loyalty = {
					estate = estate_scientists
					loyalty = 40
				}
			}			
		}		
	}
    
    # Seek Support
    # years: 20
    # trigger:
    #   always
    # effect:
    #   lose prestige/government points
    #   add 10 influence
    #   add 15 loyalty
    interaction = {
		name = "SEEK_SUPPORT"
		icon = 7
		
		years_between_use = 20
		
		trigger = {
			always = yes
		}
		
		effect = {
            if = { limit = { has_global_flag = enable_common_logging } log = "[Root.GetName] used SEEK_SUPPORT scientists estate action" }
			add_prestige = -5
			add_legitimacy = -5
			add_republican_tradition = -3
			add_devotion = -3

			add_estate_influence_modifier = {
				estate = estate_scientists
				desc = EST_VAL_SOUGHT_SUPPORT
				influence = 10
				duration = 7300
			}
			add_estate_loyalty = {
				estate = estate_scientists
				loyalty = 15
			}
		}
	
		ai_will_do = {
			factor = 1
            
			modifier = {
				factor = 0
				NOT = {
                    estate_loyalty = {
                        estate = estate_scientists
                        loyalty = 30
                    }			
                }
			}
			modifier = {
				factor = 0
				estate_influence = {
					estate = estate_scientists
					influence = 40
				}						
			}			
		}
	}
    
    # Oust Undesirables
    # years: 20
    # trigger:
    #   always
    # effect:
    #   -20 influence
    #   -15 loyalty
    interaction = {
		name = "OUST_UNDESIRABLES"
		icon = 10
		
		years_between_use = 20
		
		trigger = {
			always = yes
		}
		
		effect = {
            if = { limit = { has_global_flag = enable_common_logging } log = "[Root.GetName] used OUST_UNDESIRABLES scientists estate action" }
			add_estate_influence_modifier = {
				estate = estate_scientists
				desc = EST_VAL_OUSTED_UNDESIRABLES
				influence = -20
				duration = 7300
			}
			add_estate_loyalty = {
				estate = estate_scientists
				loyalty = -15
			}
		}
	
		ai_will_do = {
			factor = 1

			modifier = {
				factor = 0
				NOT = {
                    estate_influence = {
                        estate = estate_scientists
                        influence = 80
                    }	
                }
			}			
		}
	}
    
    # Recruit Scientist
    # years: 30
    # trigger:
    #   influence: 40
    # effect:
    #   + advisor
    #   15 influence
    interaction = {
		name = "RECRUIT_SCIENTIST"
		icon = 25
		
		years_between_use = 30
		
		potential = {
			NOT = { has_disaster = estate_scientists_disaster }
		}
		
		trigger = {
			estate_influence = {
				estate = estate_scientists
				influence = 40
			}
		}
		
		effect = {
            if = { limit = { has_global_flag = enable_common_logging } log = "[Root.GetName] used RECRUIT_SCIENTIST scientists estate action" }
            add_scientific_capacity_5 = yes
            
			if = {
				limit = {
					monthly_income = 25
				}
				define_advisor = {
					type = natural_scientist
					skill = 3
					discount = yes
				}
			}
			if = {
				limit = { NOT = { monthly_income = 25 } }
				define_advisor = {
					type = natural_scientist
					skill = 2
					discount = yes
				}
			}
			add_estate_influence_modifier = {
				estate = estate_scientists
				desc = EST_VAL_RECRUITED_ADVISOR
				influence = 15
				duration = 10950
			}
		}
		
		ai_will_do = {
			factor = 1
            
            modifier = {   
                factor = 0
                estate_influence = {
                    estate = estate_scientists
                    influence = 40
                }
            }
		}
	}
    
    # Recruit Researcher
    # years: 30
    # trigger:
    #   influence: 40
    # effect:
    #   + advisor
    #   15 influence
    interaction = {
		name = "RECRUIT_RESEARCHER"
		icon = 25
		
		years_between_use = 30
		
		potential = {
			NOT = { has_disaster = estate_scientists_disaster }
		}
		
		trigger = {
			estate_influence = {
				estate = estate_scientists
				influence = 40
			}
		}
		
		effect = {
            if = { limit = { has_global_flag = enable_common_logging } log = "[Root.GetName] used RECRUIT_RESEARCHER scientists estate action" }
            add_scientific_capacity_5 = yes
            
			if = {
				limit = {
					monthly_income = 25
				}
				define_advisor = {
					type = philosopher
					skill = 3
					discount = yes
				}
			}
			if = {
				limit = { NOT = { monthly_income = 25 } }
				define_advisor = {
					type = philosopher
					skill = 2
					discount = yes
				}
			}
			add_estate_influence_modifier = {
				estate = estate_scientists
				desc = EST_VAL_RECRUITED_ADVISOR
				influence = 15
				duration = 10950
			}
		}
		
		ai_will_do = {
			factor = 1
            
            modifier = {   
                factor = 0
                estate_influence = {
                    estate = estate_scientists
                    influence = 40
                }
            }
		}
	}
    
    # Fund Research
    # years: 20
    # trigger:
    #   loyalty: 30
    #   influence: 25
    # effect: 
    #   -0.1 idea cost
    #   20 influence
    interaction = {
		name = "FUND_RESEARCH"
		icon = 102
		
		years_between_use = 10
		
		trigger = {
			estate_loyalty = {
				estate = estate_scientists
				loyalty = 30
			}	
			estate_influence = {
				estate = estate_scientists
				influence = 25
			}
            NOT = { has_country_modifier = funding_scientific_research }
		}
		
		effect = {
            if = { limit = { has_global_flag = enable_common_logging } log = "[Root.GetName] used FUND_RESEARCH scientists estate action" }
			add_country_modifier = {
                name = funding_scientific_research
                duration = 3650
            }
            
            add_scientific_capacity_5 = yes
            
            add_estate_influence_modifier = {
				estate = estate_scientists
				desc = EST_VAL_FUNDED_RESEARCH
				influence = 15
				duration = 3650
			}
		}
		
		ai_will_do = {
			factor = 1
            
            modifier = {   
                factor = 0
                estate_influence = {
                    estate = estate_scientists
                    influence = 40
                }
            }
		}
	}
    
    # Attempt Experiment
    # years: 20
    # trigger:
    #   loyalty: 30
    #   influence: 25
    # effect: 
    #   10 influence
    #   random effect
    interaction = {
		name = "ATTEMPT_EXPERIMENT"
		icon = 22
		
		years_between_use = 10
		
		trigger = {
			estate_loyalty = {
				estate = estate_scientists
				loyalty = 30
			}	
			estate_influence = {
				estate = estate_scientists
				influence = 25
			}
		}
		
		effect = {
            if = { limit = { has_global_flag = enable_common_logging } log = "[Root.GetName] used ATTEMPT_EXPERIMENT scientists estate action" }
			set_country_flag = do_experiment
            custom_tooltip = tt_do_experiment
            #country_event = { id = fallout_estates.12 }
            
            add_scientific_capacity_5 = yes
            
            add_estate_influence_modifier = {
				estate = estate_scientists
				desc = EST_VAL_ATTEMPTED_EXPERIMENT
				influence = 20
				duration = 3650
			}
		}
		
		ai_will_do = {
			factor = 1
            
            modifier = {   
                factor = 0
                estate_influence = {
                    estate = estate_scientists
                    influence = 40
                }
            }
		}
	}
	
}