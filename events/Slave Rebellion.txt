namespace = slave_rebellion

# Slave Rebellion!
country_event = {
	id = slave_rebellion.1
	title = slave_rebellion.1.title
	desc = slave_rebellion.1.desc
	picture = RAIDERS_eventPicture
	
	is_triggered_only = yes
    
    immediate = {
        hidden_effect = {
            if = { limit = { has_global_flag = enable_event_logging } log = "[Root.GetName] - slave_rebellion.1" }
        }
    }
    
	option = {
		name = slave_rebellion.1.option.a
		
        set_country_flag = slave_rebellion_underway
        
        capital_scope = {
            spawn_rebels = {
				type = slave_rebels
				size = 4
				win = yes
				unrest = 15
			}
        }
      
        add_stability = -3
        
        custom_tooltip = removed_slaves_tt
        
        hidden_effect = {
            set_variable = {
                which = slave_count
                value = 0
            }
        }

	}
}

# Slave Rebellion Ended!
country_event = {
	id = slave_rebellion.2
	title = slave_rebellion.2.title
	desc = slave_rebellion.2.desc
	picture = SKELETON_BEHIND_BARS_eventPicture
	
	is_triggered_only = yes
    
    immediate = {
        hidden_effect = {
            if = { limit = { has_global_flag = enable_event_logging } log = "[Root.GetName] - slave_rebellion.2" }
        }
    }
    
	option = {
		name = slave_rebellion.2.option.a
		
        add_stability = 3
        
        clr_country_flag = slave_rebellion_underway
        
        if = {
            limit = {
                has_country_modifier = slave_superiority
            }
            remove_country_modifier = slave_superiority
        }
        
        hidden_effect = {
            add_country_modifier = {
                name = disaster_cooldown
                duration = 3650
                hidden = yes
            }
        }
	}
}

# Slave Sympathizers
country_event = {
	id = slave_rebellion.3
	title = slave_rebellion.3.title
	desc = slave_rebellion.3.desc
	picture = DIAMOND_CITY_eventPicture
	
	is_triggered_only = yes
    
    trigger = {
        NOT = { num_of_revolts = 3 }
    }
    
    immediate = {
        hidden_effect = {
            if = { limit = { has_global_flag = enable_event_logging } log = "[Root.GetName] - slave_rebellion.3" }
        }
    }
    
	option = {
		name = slave_rebellion.3.option.a
		
        random_owned_province = {
            limit = {
                is_capital = no
            }
            spawn_rebels = {
				type = slave_rebels
				size = 2
				win = yes
				unrest = 15
			}
        }
	}
}

# Slave Assault
country_event = {
	id = slave_rebellion.4
	title = slave_rebellion.4.title
	desc = slave_rebellion.4.desc
	picture = ARMY_BLOCKADE_eventPicture
	
	is_triggered_only = yes
    
    trigger = {
        NOT = { num_of_revolts = 3 }
    }
    
    immediate = {
        hidden_effect = {
            if = { limit = { has_global_flag = enable_event_logging } log = "[Root.GetName] - slave_rebellion.4" }
        }
    }
    
	option = {
		name = slave_rebellion.4.option.a
		
        random_owned_province = {
            limit = {
                is_capital = no
            }
            spawn_rebels = {
				type = slave_rebels
				size = 1
				win = yes
				unrest = 15
			}
        }
	}
}