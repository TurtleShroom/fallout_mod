namespace = slavery

# Slavery setup
country_event = {
	id = slavery.1
	title = slavery.1.title
	desc = slavery.1.desc
	picture = ENCAMPMENT_eventPicture
	
	is_triggered_only = yes
    hidden = yes
    
    trigger = {
        NOT = { has_country_flag = setup_slavery }
    }
    
    immediate = {
        set_country_flag = setup_slavery
        hidden_effect = {
            if = { limit = { has_global_flag = enable_event_logging } log = "[Root.GetName] - slavery.1" }
        }
    }

    option = {
		name = slavery.1.option.a
    
        if = {
            limit = {
                NOT = { tag = SOR }
                NOT = { tag = DED }
                NOT = { tag = JAC }
                OR = {
                    technology_group = tech_tribal
                    technology_group = tech_raider
                    technology_group = tech_super_mutant
                    technology_group = tech_robot
                    technology_group = tech_caesars_legion
                    technology_group = tech_alien
                }
            }
            add_country_modifier = {
                name = slavery_permitted
                duration = -1
                hidden = yes
            }
            else = {
                add_country_modifier = {
                    name = slavery_prohibited
                    duration = -1
                    hidden = yes
                }
            }
        }
    }
}

# "Victory over $FROMCOUNTRY$"
country_event = {
	id = slavery.2
	title = slavery.2.title
	desc = slavery.2.desc
	picture = ENCAMPMENT_eventPicture
	
    is_triggered_only = yes
    
    trigger = {
        has_any_disaster = no
        has_country_modifier = slavery_permitted
    }
    
    immediate = {
        hidden_effect = {
            if = { limit = { has_global_flag = enable_event_logging } log = "[Root.GetName] - slavery.2" }
        }
    }
    
	option = {
		name = slavery.2.option.a
		
        add_slaves_50 = yes
        
        add_prestige = -5
	}
    
    option = {
		name = slavery.2.option.b
		
        add_years_of_income = 1
	}
    
    option = {
		name = slavery.2.option.c
		
        add_prestige = 5
	}
}

# "Slaves of War"
country_event = {
	id = slavery.3
	title = slavery.3.title
	desc = slavery.3.desc
	picture = ENCAMPMENT_eventPicture
	
    is_triggered_only = yes
    
    trigger = {
        has_any_disaster = no
        has_country_modifier = slavery_permitted
    }
    
    immediate = {
        hidden_effect = {
            if = { limit = { has_global_flag = enable_event_logging } log = "[Root.GetName] - slavery.3" }
        }
    }
    
	option = {
		name = slavery.3.option.a
		
        add_slaves_25 = yes
	}
}

# "Slaver's Haul"
country_event = {
	id = slavery.4
	title = slavery.4.title
	desc = slavery.4.desc
	picture = ENCAMPMENT_eventPicture
    
    trigger = {
        has_any_disaster = no
        has_country_modifier = slavery_permitted
        treasury = 50
    }
    
    mean_time_to_happen = {
		months = 120
	}
    
    immediate = {
        hidden_effect = {
            if = { limit = { has_global_flag = enable_event_logging } log = "[Root.GetName] - slavery.4" }
        }
    }
    
	option = {
		name = slavery.4.option.a
		
        add_treasury = -50
        
        add_slaves_25 = yes
	}
}

